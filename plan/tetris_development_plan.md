# 테트리스 게임 개발 계획
버전: 1.0  
작성: 핵심 개발팀  
최종 업데이트: 2025-06-12

---

## 1. 프로젝트 개요
테트리스는 전 세계적으로 사랑받는 블록 맞추기 퍼즐 게임입니다.  
본 프로젝트의 목표는 원작 규칙을 충실히 반영하면서도 현대적인 **크로스 플랫폼(웹/데스크톱)** 환경에서 구동되고, **확장성·유지보수성·테스트 용이성**을 갖춘 오픈소스 테트리스 클론을 12주 내 출시하는 것입니다.

---

## 2. 목표 및 성공 기준
| 목표 | 성공 기준(측정 지표) |
|------|---------------------|
| 싱글플레이 테트리스 완전 구현 | 30 분 플레이 테스트 동안 치명적 버그 0건 |
| 60 FPS 입력·렌더 응답성 | 대상 기기(저사양 노트북 포함) 프레임 시간 ≤ 16 ms |
| 코드 품질 확보 | 도메인·엔진 모듈 단위 테스트 커버리지 ≥ 85 % |
| 자동화된 빌드·배포 파이프라인 | GitHub Actions 워크플로우(린트→테스트→빌드→배포) 성공 |
| 확장 지점(스킨·AI 등) 제공 | 문서화된 플러그인 예시 1종 이상 |

---

## 3. 요구사항 분석
### 3.1 기능 요구사항
1. 테트로미노 생성·이동·회전·고정  
2. 레벨별 속도로 자동 하강(중력)  
3. 1~4줄 라인 클리어 및 점수 계산  
4. 레벨 상승·스코어·라인 수 관리  
5. 홀드·넥스트 큐(최소 3개) 표시  
6. 일시정지/재개, 게임 오버 처리  
7. 사용자 지정 키보드 컨트롤  
8. 배경 음악·효과음 on/off  
9. 로컬 최고 점수 저장  
10. 옵션/설정 메뉴

### 3.2 비기능 요구사항
- **성능**: 60 FPS 유지, 평균 프레임 시간 12 ms 이하  
- **이식성**: 최신 브라우저, Electron 데스크톱 앱 모두 지원  
- **접근성**: 색약 팔레트, 키 바인딩 변경 기능  
- **유지보수성**: 모듈화·클린 아키텍처, ESLint/Prettier 통과  
- **현지화**: i18n 준비(기본 한국어, 영어)

---

## 4. 기술 스택
| 계층 | 기술 | 비고 |
|------|------|------|
| 언어 | TypeScript | 타입 안전, 웹·데스크톱 공유 |
| 렌더링 | HTML5 Canvas(PixiJS) | 하드웨어 가속 2D |
| 오디오 | Web Audio API | 배경음·SFX 믹서 |
| 데스크톱 | Electron | 웹 빌드 재사용 |
| 상태 관리 | Redux Toolkit | 예측 가능한 게임 상태 |
| 빌드 도구 | Vite | 빠른 HMR |
| 테스트 | Vitest(단위)·Playwright(E2E) | CI 통합 |
| CI/CD | GitHub Actions | 자동 빌드·배포 |
| 패키징 | Electron Builder·Netlify | 설치 파일·웹 호스팅 |
| 린팅/포맷 | ESLint + Prettier | 코드 일관성 |

---

## 5. 시스템 아키텍처 요약
클린 아키텍처 4계층:
1. **표현(UI)** – PixiJS 캔버스, React 메뉴  
2. **애플리케이션(엔진)** – GameLoop, Redux 스토어  
3. **도메인** – 순수 모델(Board, Tetromino)·규칙(SRS 등)  
4. **인프라** – 저장·오디오·플랫폼 어댑터  

외부 레이어는 내부 레이어 인터페이스를 통해서만 접근(의존성 규칙).

---

## 6. 개발 단계 & 일정(총 12주)
| 단계 | 기간 | 주요 산출물 |
|------|------|------------|
| 0. 프로젝트 설정 | 1주차 | 리포 초기화, CI, 린트·테스트 스캐폴드 |
| 1. 코어 엔진 | 2-3주차 | Board·Tetromino 로직, SRS, 단위 테스트 |
| 2. 렌더링·입력 | 4-5주차 | Pixi 렌더러, 키 입력, 60 FPS 데모 |
| 3. 점수·레벨 | 6주차 | 점수·레벨 알고리즘, 홀드·넥스트 UI |
| 4. UX 다듬기 | 7-8주차 | 메뉴·설정·오디오·접근성 |
| 5. 데스크톱 빌드 | 9주차 | Electron 패키징, 설치 파일 |
| 6. 테스트·QA | 10-11주차 | 커버리지 ≥ 85 %, E2E 스크립트 |
| 7. 릴리스 | 12주차 | v1.0 태그, 웹 배포, 설치 파일 업로드 |

---

## 7. 테스트 전략
1. **단위 테스트** – 도메인·엔진 로직  
2. **통합 테스트** – GameLoop + 리듀서 조합  
3. **E2E 테스트** – Playwright로 실제 플레이 시나리오  
4. **성능 테스트** – 프레임 시간 측정·회귀 모니터링  
5. **회귀/스모크** – 모든 PR마다 CI 자동 실행

---

## 8. CI/CD 파이프라인
1. Lint → Test → Build(웹 & 데스크톱)  
2. Web: Netlify 프리뷰→프로덕션 배포  
3. Desktop: Electron Builder로 플랫폼별 설치 파일, GitHub Releases 업로드  
4. 커버리지·성능 리포트 주석 자동 생성  
5. Secrets 관리: GitHub OIDC, Netlify 환경 변수

---

## 9. 배포 대상
- **웹**: `https://play.tetris-clone.com` (Netlify, CDN)  
- **데스크톱**: Windows MSI, macOS DMG, Linux AppImage (GitHub Releases)  
- **향후**: PWA 모바일 래퍼

---

## 10. 유지보수 및 확장성
- Redux 미들웨어 기반 플러그인 시스템(업적, 분석 등)  
- JSON 팔레트 파일로 테마 교체  
- AI 봇: 상태 구독 → 가상 액션 발행  
- 코드베이스 모노레포 유지, dependabot 자동 PR

---

## 11. 위험 관리
| 위험 | 영향 | 가능성 | 대응 전략 |
|------|------|--------|-----------|
| 저사양 GPU 성능 저하 | 높음 | 중/높 | 드로우 콜 최적화, DOM 백업 렌더 |
| Electron 코드서명 문제 | 중 | 중 | CI 서명 자동화, 조기 테스트 |
| 범위 증가(멀티플레이) | 높음 | 높음 | v1.0 범위 고정, v1.1 로드맵 별도 |
| 의존성 업데이트 이슈 | 낮음 | 낮음 | lockfile, dependabot 경고 |

---

## 12. 부록
- 참조 규칙: **Tetris Guideline 2023**  
- 아트 에셋: OpenGameArt 라이선스 프리 블록 텍스처  
- 음악: CC-BY-SA 칩튠 플레이리스트  

---

_이 문서는 개발 팀의 “살아있는” 청사진입니다. 변경 시 리드 승인과 버전 업데이트가 필요합니다._
